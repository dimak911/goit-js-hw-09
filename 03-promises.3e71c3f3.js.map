{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,kBAC9BE,KAAMH,SAASC,cAAc,iBAC7BG,OAAQJ,SAASC,cAAc,mBAC/BI,UAAWL,SAASC,cAAc,0BAwBpC,SAASK,EAAcC,EAAUL,GAC/B,IAAMM,EAAe,CAAED,WAAUL,SAC3BO,EAAgBC,KAAKC,SAAW,GAWtC,OAVgB,IAAIC,SAAQ,SAACC,EAASC,GACpCC,YAAW,WACLN,EACFI,EAAQL,GAERM,EAAON,KAERN,MAMP,SAASc,EAAaT,EAAUL,GAC9BN,EAAAqB,OAAOC,QAAQ,uBAAwCC,OAAfZ,EAAS,QAAYY,OAANjB,EAAM,MAAK,CAC9DkB,SAAO,IAIb,SAASC,EAAWd,EAAUL,GAC5BN,EAAAqB,OAAOK,QAAQ,sBAAqCH,OAAfZ,EAAS,QAAYY,OAANjB,EAAM,MAAK,CAC7DkB,SAAS,IA7CbtB,EAAKC,KAAKwB,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAMC,iBACN,IAAIC,EAAaC,OAAO7B,EAAKI,MAAM0B,OAC7BC,EAAYF,OAAO7B,EAAKK,KAAKyB,OAC7BE,EAAcH,OAAO7B,EAAKM,OAAOwB,OACjCG,EAAaD,EAAcD,EAAYH,EAC7C5B,EAAKO,UAAU2B,aAAa,WAAY,YACxCjB,YAAW,WACTjB,EAAKO,UAAU4B,gBAAgB,cAC9BF,GAEH,IAAK,IAAIG,EAAI,EAAGA,EAAIJ,EAAc,EAAGI,IACnC5B,EAAc4B,EAAGR,GACdS,MAAK,SAAAC,G,OAAyBpB,EAAdoB,EAAR7B,SAAe6B,EAALlC,UAClBmC,OAAM,SAAAD,G,OAAyBf,EAAde,EAAR7B,SAAe6B,EAALlC,UACtBwB,GAAcG,K","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  submitBtn: document.querySelector('button[type=\"submit\"]'),\n};\n\nrefs.form.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  let delayValue = Number(refs.delay.value);\n  const stepValue = Number(refs.step.value);\n  const amountValue = Number(refs.amount.value);\n  const totalDelay = amountValue * stepValue + delayValue;\n  refs.submitBtn.setAttribute('disabled', 'disabled');\n  setTimeout(() => {\n    refs.submitBtn.removeAttribute('disabled');\n  }, totalDelay);\n\n  for (let i = 1; i < amountValue + 1; i++) {\n    createPromise(i, delayValue)\n      .then(({ position, delay }) => onSuccessMsg(position, delay))\n      .catch(({ position, delay }) => onErrorMsg(position, delay));\n    delayValue += stepValue;\n  }\n}\n\nfunction createPromise(position, delay) {\n  const promiseProps = { position, delay };\n  const shouldResolve = Math.random() > 0.5;\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve(promiseProps);\n      } else {\n        reject(promiseProps);\n      }\n    }, delay);\n  });\n\n  return promise;\n}\n\nfunction onSuccessMsg(position, delay) {\n  Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`, {\n    useIcon: false,\n  });\n}\n\nfunction onErrorMsg(position, delay) {\n  Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`, {\n    useIcon: false,\n  });\n}\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$refs","form","document","querySelector","delay","step","amount","submitBtn","$ce04d3a99e08e73b$var$createPromise","position","promiseProps","shouldResolve","Math","random","Promise","resolve","reject","setTimeout","$ce04d3a99e08e73b$var$onSuccessMsg","Notify","success","concat","useIcon","$ce04d3a99e08e73b$var$onErrorMsg","failure","addEventListener","event","preventDefault","delayValue","Number","value","stepValue","amountValue","totalDelay","setAttribute","removeAttribute","i","then","param","catch"],"version":3,"file":"03-promises.3e71c3f3.js.map"}