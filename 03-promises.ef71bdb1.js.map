{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,MAAOF,SAASC,cAAc,kBAC9BE,KAAMH,SAASC,cAAc,iBAC7BG,OAAQJ,SAASC,cAAc,mBAC/BI,UAAWL,SAASC,cAAc,0BAwBpC,SAASK,EAAcC,EAAUL,GAC/B,MAAMM,EAAe,C,SAAED,E,MAAUL,GAC3BO,EAAgBC,KAAKC,SAAW,GAWtC,OAVgB,IAAIC,SAAQ,CAACC,EAASC,KACpCC,YAAW,KACLN,EACFI,EAAQL,GAERM,EAAON,KAERN,MAMP,SAASc,EAAaT,EAAUL,GAC9BN,EAAAqB,OAAOC,QAAQ,uBAAqBX,QAAiBL,MAAW,CAC5DiB,SAAO,IAIb,SAASC,EAAWb,EAAUL,GAC5BN,EAAAqB,OAAOI,QAAQ,sBAAoBd,QAAeL,MAAW,CAC3DiB,SAAS,IA7CbrB,EAAKC,KAAKuB,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAMC,iBACN,IAAIC,EAAaC,OAAO5B,EAAKI,MAAMyB,OACnC,MAAMC,EAAYF,OAAO5B,EAAKK,KAAKwB,OAC7BE,EAAcH,OAAO5B,EAAKM,OAAOuB,OACjCG,EAAaD,EAAcD,EAAYH,EAC7C3B,EAAKO,UAAU0B,aAAa,WAAY,YACxChB,YAAW,KACTjB,EAAKO,UAAU2B,gBAAgB,cAC9BF,GAEH,IAAK,IAAIG,EAAI,EAAGA,EAAIJ,EAAc,EAAGI,IACnC3B,EAAc2B,EAAGR,GACdS,MAAK,EAAC3B,SAAEA,EAAQL,MAAEA,KAAYc,EAAaT,EAAUL,KACrDiC,OAAM,EAAC5B,SAAEA,EAAQL,MAAEA,KAAYkB,EAAWb,EAAUL,KACvDuB,GAAcG","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  delay: document.querySelector('[name=\"delay\"]'),\n  step: document.querySelector('[name=\"step\"]'),\n  amount: document.querySelector('[name=\"amount\"]'),\n  submitBtn: document.querySelector('button[type=\"submit\"]'),\n};\n\nrefs.form.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  let delayValue = Number(refs.delay.value);\n  const stepValue = Number(refs.step.value);\n  const amountValue = Number(refs.amount.value);\n  const totalDelay = amountValue * stepValue + delayValue;\n  refs.submitBtn.setAttribute('disabled', 'disabled');\n  setTimeout(() => {\n    refs.submitBtn.removeAttribute('disabled');\n  }, totalDelay);\n\n  for (let i = 1; i < amountValue + 1; i++) {\n    createPromise(i, delayValue)\n      .then(({ position, delay }) => onSuccessMsg(position, delay))\n      .catch(({ position, delay }) => onErrorMsg(position, delay));\n    delayValue += stepValue;\n  }\n}\n\nfunction createPromise(position, delay) {\n  const promiseProps = { position, delay };\n  const shouldResolve = Math.random() > 0.5;\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve(promiseProps);\n      } else {\n        reject(promiseProps);\n      }\n    }, delay);\n  });\n\n  return promise;\n}\n\nfunction onSuccessMsg(position, delay) {\n  Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`, {\n    useIcon: false,\n  });\n}\n\nfunction onErrorMsg(position, delay) {\n  Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`, {\n    useIcon: false,\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$refs","form","document","querySelector","delay","step","amount","submitBtn","$47d4ff9957288465$var$createPromise","position","promiseProps","shouldResolve","Math","random","Promise","resolve","reject","setTimeout","$47d4ff9957288465$var$onSuccessMsg","Notify","success","useIcon","$47d4ff9957288465$var$onErrorMsg","failure","addEventListener","event","preventDefault","delayValue","Number","value","stepValue","amountValue","totalDelay","setAttribute","removeAttribute","i","then","catch"],"version":3,"file":"03-promises.ef71bdb1.js.map"}